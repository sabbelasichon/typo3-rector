<html
    xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
    xmlns:core="http://typo3.org/ns/TYPO3/CMS/Core/ViewHelpers"
    data-namespace-typo3-fluid="true"
>

<typo3-backend-live-search>
    <form>
        <div class="sticky-form-actions">
            <div class="row row-cols-auto justify-content-between">
                <div class="col flex-grow-1">
                    <div class="input-group mb-3">
                        <f:if condition="{searchProviders->f:count()} > 0">
                            <div class="btn-group">
                                <button class="btn btn-default t3js-search-provider-dropdown-toggle position-relative" type="button" data-bs-toggle="dropdown" data-bs-auto-close="false" aria-expanded="false">
                                    <core:icon identifier="actions-menu-alternative" size="small" />
                                    <span class="search-option-badge badge badge-primary {activeOptions == 0 ? 'hidden' : ''}" data-active-options-counter="{activeOptions}">
                                        <output>{activeOptions}</output>
                                        <span class="visually-hidden">active filters</span>
                                    </span>
                                </button>
                                <div class="dropdown-menu t3js-search-provider-dropdown">
                                    <h6 class="dropdown-header">Search records in</h6>
                                    <div class="dropdown-item-text">
                                        <f:for each="{searchProviders}" as="searchProvider" key="searchProviderIdentifier">
                                            <typo3-backend-live-search-option-item
                                                optionId="{searchProviderIdentifier}"
                                                optionName="searchProviders"
                                                optionLabel="{searchProvider.instance.filterLabel}"
                                                {searchProvider.isActive ? 'active' : ''}
                                            ></typo3-backend-live-search-option-item>
                                        </f:for>
                                    </div>
                                </div>
                            </div>
                        </f:if>
                        <input type="search" name="query" class="form-control" placeholder="Search" value="{searchDemand.query}" autocomplete="off">
                    </div>
                    <div class="form-text mt-2">
                        <core:icon identifier="actions-lightbulb-on" size="small" /> {f:translate(key: '{hint}')}
                    </div>
                </div>
            </div>
        </div>
        <input type="hidden" name="offset" value="{searchDemand.offset}">
    </form>
    <typo3-backend-live-search-result-container></typo3-backend-live-search-result-container>
    <typo3-backend-live-search-result-pagination></typo3-backend-live-search-result-pagination>
</typo3-backend-live-search>
</html>
